import{c as O,g as k,m as M,R as S,C as R,o as V,j as l,B as b,r as v}from"./index-6uUUDMWa.js";import{R as I}from"./InboxOutlined-CeIqNLdp.js";import{U as T}from"./index-BwzhNZHn.js";import{i as w}from"./gapSize-U1swVQyS.js";import{M as U}from"./index-RwOJGtCZ.js";import{s as u}from"./index-D_rdUX3l.js";import"./fade-CQEYnZHM.js";import"./useForceUpdate-C8SbLCJF.js";import"./useLocale-CdvqxKGZ.js";import"./index-B3WT-xPw.js";import"./PurePanel-Bst78Rcv.js";const $=["wrap","nowrap","wrap-reverse"],N=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],F=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],D=(e,t)=>{const s=t.wrap===!0?"wrap":t.wrap;return{[`${e}-wrap-${s}`]:s&&$.includes(s)}},L=(e,t)=>{const s={};return F.forEach(n=>{s[`${e}-align-${n}`]=t.align===n}),s[`${e}-align-stretch`]=!t.align&&!!t.vertical,s},J=(e,t)=>{const s={};return N.forEach(n=>{s[`${e}-justify-${n}`]=t.justify===n}),s};function W(e,t){return O(Object.assign(Object.assign(Object.assign({},D(e,t)),L(e,t)),J(e,t)))}const _=e=>{const{componentCls:t}=e;return{[t]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},A=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}}},B=e=>{const{componentCls:t}=e,s={};return $.forEach(n=>{s[`${t}-wrap-${n}`]={flexWrap:n}}),s},z=e=>{const{componentCls:t}=e,s={};return F.forEach(n=>{s[`${t}-align-${n}`]={alignItems:n}}),s},q=e=>{const{componentCls:t}=e,s={};return N.forEach(n=>{s[`${t}-justify-${n}`]={justifyContent:n}}),s},H=()=>({}),X=k("Flex",e=>{const{paddingXS:t,padding:s,paddingLG:n}=e,a=M(e,{flexGapSM:t,flexGap:s,flexGapLG:n});return[_(a),A(a),B(a),z(a),q(a)]},H,{resetStyle:!1});var Q=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(s[n[a]]=e[n[a]]);return s};const Y=S.forwardRef((e,t)=>{const{prefixCls:s,rootClassName:n,className:a,style:c,flex:p,gap:i,children:x,vertical:f=!1,component:g="div"}=e,h=Q(e,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:r,direction:d,getPrefixCls:m}=S.useContext(R),o=m("flex",s),[y,j,G]=X(o),E=f??(r==null?void 0:r.vertical),P=O(a,n,r==null?void 0:r.className,o,j,G,W(o,e),{[`${o}-rtl`]:d==="rtl",[`${o}-gap-${i}`]:w(i),[`${o}-vertical`]:E}),C=Object.assign(Object.assign({},r==null?void 0:r.style),c);return p&&(C.flex=p),i&&!w(i)&&(C.gap=i),y(S.createElement(g,Object.assign({ref:t,className:P,style:C},V(h,["justify","wrap","align"])),x))}),{Dragger:Z}=T,K=({onFileSelect:e})=>{const t={name:"file",multiple:!1,beforeUpload:s=>(e(s),console.log("beforeUpload",s),!1)};return l.jsx("div",{children:l.jsxs(Z,{...t,children:[l.jsx("p",{className:"ant-upload-drag-icon",children:l.jsx(I,{})}),l.jsx("p",{className:"ant-upload-text",children:"点击或者拖动文件进行上传"}),l.jsx("p",{className:"ant-upload-hint",children:"支持单文件上传。严格禁止上传公司数据或其他被禁止的文件。"})]})})},ee=({fileList:e,handleUpload:t,handleDetect:s,handleCancel:n,isModalVisible:a,handleOk:c,handleCancelModal:p})=>l.jsx("div",{style:{marginTop:"20px"},children:l.jsxs(Y,{vertical:!0,gap:"small",style:{width:"100%"},children:[l.jsx(b,{className:"upload",type:"primary",block:!0,onClick:()=>t(e),children:"上传"}),l.jsx(b,{className:"detect",type:"primary",block:!0,onClick:s,children:"检测"}),l.jsx(b,{className:"cancel",block:!0,onClick:n,children:"取消"}),l.jsx(U,{title:"确认取消",open:a,onOk:c,onCancel:p,okText:"确认",cancelText:"取消",children:l.jsx("p",{children:"你确定要删除所有已选择的文件吗？"})})]})}),fe=()=>{const[e,t]=v.useState([]),[s,n]=v.useState([]),[a,c]=v.useState(!1),p=r=>{t([r])},i=async()=>{if(e.length===0){u.warning("请先选择文件");return}const d={list:[`E:/picture/幻灯片/${e[0].name}`]};console.log("上传文件:",JSON.stringify(d));try{const o=await(await fetch("http://127.0.0.1:36677/upload?picbed=minio",{method:"POST",body:JSON.stringify(d)})).json();if(o.success){const y={name:e[0].name,url:o.result[0]};n(j=>[...j,y]),u.success("文件上传成功")}else u.error("文件上传失败")}catch(m){console.error("上传出错:",m),u.error("上传出错")}},x=()=>{u.info("检测按钮被点击")},f=()=>{c(!0)},g=()=>{t([]),c(!1)},h=()=>{c(!1)};return l.jsxs("div",{children:[l.jsx(K,{onFileSelect:p}),l.jsx(ee,{fileList:e,handleUpload:i,handleDetect:x,handleCancel:f,isModalVisible:a,handleOk:g,handleCancelModal:h}),l.jsxs("div",{style:{marginTop:"20px"},children:[l.jsx("h3",{children:"上传结果："}),l.jsx("ul",{children:s.map((r,d)=>l.jsxs("li",{children:[r.name,": ",l.jsx("a",{href:r.url,children:r.url})]},d))})]})]})};export{fe as default};
